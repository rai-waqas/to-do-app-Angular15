<div class="task-item">
    <div class="banner">
      <h2 class="name">To-Do App For Your Daily Tasks</h2>
    </div>
    <h2 class="create">Create a New Task</h2>
  
    <form [formGroup]="taskForm" (ngSubmit)="onFormSubmit()">  
      <!-- Task Name -->
      <div class="form-group">
        <label for="name">Task Name</label>
        <input id="name" formControlName="name" class="form-control">
        <small *ngIf="taskForm.get('name').touched && !taskForm.get('name').valid">Task Name is required *</small>
      </div>
  
      <!-- Description -->
      <div class="form-group description-group">
        <label for="description">Description</label>
        <textarea id="description" formControlName="description" class="form-control"></textarea>
        <small *ngIf="taskForm.get('description').touched && !taskForm.get('description').valid">Description is required *</small>
      </div>
  
      <!-- Date Picker and Priority Dropdown -->
      <div class="form-group row-group">
        <div class="form-half-group">
          <label for="dueDate">Due Date</label>
          <input id="dueDate" formControlName="dueDate" type="date" class="form-control">
          <small *ngIf="taskForm.get('dueDate').touched && !taskForm.get('dueDate').valid">Date is required *</small>
        </div>
  
        <div class="form-half-group">
          <label for="priority">Priority</label>
          <select id="priority" formControlName="priority" class="form-control">
            <option value="low">Low</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
          </select>
        </div>
      </div>
  
      <!-- Tags -->
      <div class="form-group tags-group">
        <label for="tags">Tags</label>
        <input id="tags" formControlName="tags" class="form-control" placeholder="Separated by Commas">
        <small *ngIf="taskForm.get('tags').touched && !taskForm.get('tags').valid">Tags field is required *</small>
      </div>
  
      <!-- Add Task Button -->
      <button type="submit" value="submit" class="btn btn-primary add-task" *ngIf="!isEditClicked" [disabled]="!taskForm.valid">Add Task</button>
      <button type="button" class="btn btn-primary add-task" *ngIf="isEditClicked" (click)="updateTask()">Update Task</button>
    </form>
    
    <!-- Filter Buttons -->
    <div class="filter-buttons">
      <section>
        <mat-button-toggle-group
          name="favoriteColor"
          aria-label="Favorite Color"
          (change)="onToggleChange($event)"
        >
          <mat-button-toggle value="all">Show All</mat-button-toggle>
          <mat-button-toggle value="completed">Show Completed</mat-button-toggle>
        </mat-button-toggle-group>
      </section>
    </div>

    <!-- Filter By Tags -->
    <ng-container *ngIf="selectedPriority.length === 0 && selectedFilter != ''">
      <section>
          <h4>Filter By Tags</h4>
          <mat-button-toggle-group
            name="tags"
            aria-label="tags"
            (change)="onTagSelectionChange($event)"
            multiple
          >
            <mat-button-toggle *ngFor="let tag of tags" [value]="tag">{{ tag }}</mat-button-toggle>
          </mat-button-toggle-group>
      </section>
    </ng-container>

    <!-- Filter By Priority -->
    <ng-container *ngIf="selectedTags.length === 0 && selectedFilter != ''">
      <section class="priority-filter">
        <h4>Filter By Priority</h4>
        <mat-button-toggle-group
          name="priority"
          aria-label="priority"
          (change)="onPrioritySelectionChange($event)"
          multiple
        >
          <mat-button-toggle *ngFor="let p of priority" [value]="p">{{ p }}</mat-button-toggle>
        </mat-button-toggle-group>
      </section>
    </ng-container>
  
    <!-- Tasks Table -->
    <table class="table">
      <thead>
        <tr>
          <th>No.</th>
          <th>Task Name</th>
          <th>Description</th>
          <th>Due Date</th>
          <th>Priority</th>
          <th>Tags</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngIf="displayedTasks.length === 0" class="no-tasks">No Tasks to Display</ng-container>
        <tr *ngFor="let task of displayedTasks; let i = index">
          <td>{{ i + 1 }}</td>
          <td><input type="checkbox" (change)="toggleCompleted($event, task)" [checked]="task.completed"> {{ task.name }}</td>
          <td>{{ task.description }}</td>
          <td>{{ task.dueDate | date }}</td>
          <td>{{ task.priority }}</td>
          <td>{{ task.tags }}</td>
          <td>
            <button class="btn btn-warning" (click)="editTask(i)">Edit</button>
            <button class="btn btn-danger" (click)="deleteTask(task)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  